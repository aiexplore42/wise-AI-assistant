<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Wise AI Assistant Chat</title>
<style>
  /* ==== Soft‑teal colour palette ==== */
  :root{
    --primary:#00897B;
    --primary-dark:#00695C;
    --bg-instructions:#e0f2f1;
    --bg-prompt:#f1fbfa;
    --bg-disclaimer:#fafafa;
  }

  body{
    font-family:Arial,Helvetica,sans-serif;
    max-width:800px;
    margin:2rem auto;
    line-height:1.6;
    color:#333;
    padding:0 1rem;
    background:#f9fbfd;
  }
  h1{ text-align:center; margin-bottom:.5rem; }

  .instructions{
    background:var(--bg-instructions);
    border-left:6px solid var(--primary);
    padding:1rem;
    margin:1.5rem 0;
  }
  .instructions ol{margin-left:1.2rem;}

  .prompt{
    background:var(--bg-prompt);
    border-left:6px solid var(--primary);
    padding:.9rem;
    margin:.9rem 0;
    position:relative;
    white-space:pre-wrap;
    transition:background .2s;
  }
  .prompt:hover{background:#d0ecec;}
  .prompt .copy-btn{
    position:absolute;
    top:6px; right:6px;
    background:var(--primary);
    color:#fff;
    border:none;
    border-radius:3px;
    padding:2px 6px;
    font-size:.85rem;
    cursor:pointer;
  }
  .prompt .copy-btn:hover{background:var(--primary-dark);}

  /* ==== Chat UI ==== */
  #chatContainer{
    background:#fff;
    border:1px solid #ddd;
    border-radius:5px;
    padding:1rem;
    margin:1.5rem 0;
  }
  #messages{
    min-height:120px;
    margin-bottom:.5rem;
    overflow-y:auto;
    font-size:.95rem;
    color:#444;
    padding:.5rem;
    background:#f7f9fc;
    border-radius:4px;
  }
  #userInput{
    width:100%;
    padding:.5rem;
    font-size:1rem;
    border:1px solid #bbb;
    border-radius:4px;
    resize:vertical;
  }
  #sendBtn{
    margin-top:.5rem;
    background:var(--primary);
    color:#fff;
    border:none;
    border-radius:4px;
    padding:.5rem 1rem;
    font-size:1rem;
    cursor:pointer;
  }
  #sendBtn:hover{background:var(--primary-dark);}

  .chat-btn{
    display:block;
    width:100%; max-width:300px;
    margin:1.5rem auto;
    padding:.8rem 1.2rem;
    background:var(--primary);
    color:#fff;
    border:none;
    border-radius:6px;
    font-size:1.1rem;
    text-align:center;
    text-decoration:none;
    cursor:pointer;
  }
  .chat-btn:hover{background:var(--primary-dark);}

  footer{
    margin-top:2rem;
    font-size:.85rem;
    text-align:center;
    color:#777;
    line-height:1.4;
  }
  .disclaimer{
    font-size:.78rem;
    color:#555;
    background:var(--bg-disclaimer);
    border-left:4px solid #ff9900;
    padding:.6rem;
    margin:1rem 0;
    display:inline-block;
    text-align:left;
    max-width:100%;
  }
</style>
</head>

<body>
<h1>Wise Assistant Chat</h1>

<div class="instructions">
  <strong>How to use:</strong>
  <ol>
    <li>Pick the prompt that matches the kind of guidance you need and click **Copy**.</li>
    <li>Paste the copied prompt into the chat window below and press **Enter** or **Send**.</li>
    <li>Describe your situation, decision, or problem and send it.</li>
    <li>The AI will respond calmly, logically, and thoughtfully.</li>
    <li>Remember the answer is guidance only; verify with trusted sources before acting.</li>
  </ol>
</div>

<!-- Prompt 1 – General Advice -->
<div class="prompt" id="p1">
  <button class="copy-btn" onclick="copyPrompt('p1')">Copy</button>
You are a calm, logical, and thoughtful assistant. Listen to the user’s description of a situation, decision, or problem and provide a measured recommendation. Keep the tone neutral, avoid jargon, and limit the response to a few concise paragraphs. End with a brief reminder that the advice is for guidance only and should be verified with trusted sources before acting.
</div>

<!-- Prompt 2 – Decision‑Making -->
<div class="prompt" id="p2">
  <button class="copy-btn" onclick="copyPrompt('p2')">Copy</button>
You are a wise decision‑making coach. After the user explains the options they are weighing, outline the pros and cons of each option, suggest a logical framework (e.g., cost‑benefit, risk assessment) to evaluate them, and give a clear, balanced recommendation. Stay concise, avoid technical jargon, and add a disclaimer that the guidance is not professional advice.
</div>

<!-- Prompt 3 – Conflict Resolution -->
<div class="prompt" id="p3">
  <button class="copy-btn" onclick="copyPrompt('p3')">Copy</button>
You are a thoughtful mediator. The user describes a personal or professional conflict. Summarize the key points, propose a neutral perspective, and suggest practical steps to de‑escalate and move toward resolution. Keep the tone calm and empathetic, and remind the user that the advice is general guidance only.
</div>

<!-- Prompt 4 – Personal Growth / Goal Setting -->
<div class="prompt" id="p4">
  <button class="copy-btn" onclick="copyPrompt('p4')">Copy</button>
You are a reflective personal‑growth guide. When the user shares a goal or habit they want to develop, ask clarifying questions (if needed), then outline a simple, logical plan with 2‑3 actionable steps. Keep the language encouraging yet rational, and include a short disclaimer that the advice is for guidance only.
</div>

<!-- ==== Chat UI (powered by server‑side /chat endpoint) ==== -->
<section id="chatContainer">
  <div id="messages"><em>(Chat messages will appear here after you use a real back‑end.)</em></div>
  <textarea id="userInput" placeholder="Enter your question or description here…" rows="2"></textarea>
  <button id="sendBtn">Send</button>
</section>

<a href="https://huggingface.co/chat/" target="_blank" class="chat-btn">Free Chat (Hugging Face)</a>

<footer>
  © 2026 Fluxpuls – Powered by Hugging Face.
  <div class="disclaimer"><strong>Disclaimer:</strong> The assistant provides general guidance only. It is not a substitute for professional advice. Always verify with trusted sources before acting.</div>
  This page is for educational/demo purposes only.
</footer>

<script>
/* ---------- COPY‑PROMPT HELPERS (client‑side only) ---------- */
async function copyPrompt(id){
  const container=document.getElementById(id);
  const btn=container.querySelector('.copy-btn');
  let txt='';
  for(let node=btn.nextSibling; node; node=node.nextSibling){
    if(node.nodeType===Node.TEXT_NODE) txt+=node.textContent;
    else if(node.nodeType===Node.ELEMENT_NODE) txt+=node.innerText;
  }
  txt=txt.trim();
  try{
    await navigator.clipboard.writeText(txt);
    flash(btn,'Copied!');
  }catch(e){ fallbackCopy(txt,btn); }
}
function flash(button,msg){
  const orig=button.textContent;
  button.textContent=msg;
  setTimeout(()=>{button.textContent=orig;},1500);
}
function fallbackCopy(txt,btn){
  const ta=document.createElement('textarea');
  ta.value=txt;
  ta.style.position='fixed';
  ta.style.left='-9999px';
  document.body.appendChild(ta);
  ta.select();
  try{
    document.execCommand('copy');
    flash(btn,'Copied!');
  }catch(_){
    alert('Copy failed – please select the text manually.');
  }
  document.body.removeChild(ta);
}

/* ---------- SIMPLE CHAT LOGIC (no API key in the browser) ---------- */
async function sendMessage(){
  const input=document.getElementById('userInput');
  const userText=input.value.trim();
  if(!userText) return;

  // show user message
  appendMessage('You', userText);
  input.value=''; input.disabled=true;
  document.getElementById('sendBtn').disabled=true;

  try{
    const resp = await fetch('/chat', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({message: userText})
    });
    if(!resp.ok){
      const err = await resp.text();
      throw new Error(`Server error ${resp.status}: ${err}`);
    }
    const data = await resp.json();
    const reply = data.reply ?? '[no reply]';
    appendMessage('Assistant', reply);
  }catch(e){
    console.error(e);
    appendMessage('Error', e.message);
  }finally{
    input.disabled=false;
    document.getElementById('sendBtn').disabled=false;
    input.focus();
  }
}
function appendMessage(role, text){
  const el=document.createElement('div');
  el.style.marginBottom='0.6rem';
  el.innerHTML=`<strong>${role}:</strong> ${text}`;
  document.getElementById('messages').appendChild(el);
  const msgs=document.getElementById('messages');
  msgs.scrollTop = msgs.scrollHeight;
}
document.getElementById('sendBtn').addEventListener('click', sendMessage);
document.getElementById('userInput').addEventListener('keydown', ev=>{
  if(ev.key==='Enter' && !ev.shiftKey){
    ev.preventDefault();
    sendMessage();
  }
});
</script>
</body>
</html>
